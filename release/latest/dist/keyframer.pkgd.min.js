/*
Copyright (c) 2019 Daybrush
name: keyframer
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/keyframer.git
version: 0.0.1
*/
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t=t||self).Keyframer={})}(this,function(t){"use strict";function r(t){if(!g)return"";var r=(g.body||g.documentElement).style,e=m.length;if(typeof r[t]!=u)return t;for(var n=0;n<e;++n){var i="-"+m[n]+"-"+t;if(typeof r[i]!=u)return i}return""}var a="rgb",s="rgba",c="hsl",l="hsla",h=[a,s,c,l],f="function",o="property",p="array",v="object",e="string",n="number",u="undefined",g=typeof document!=u&&document,m=["webkit","ms","moz","o"],y=r("transform"),d=r("filter"),x=r("animation");function S(t){return t&&typeof t===v}function b(t){return Array.isArray(t)}function E(t){return typeof t===e}function R(t){var r=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return r?r.map(function(t){return t.trim()}):[]}function _(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function j(t){return[].slice.call(t)}function A(t){var r=function(t){return t.replace("#","")}(t),e=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16),u=parseInt(r.substring(6,8),16)/255;return isNaN(u)&&(u=1),[e,n,i,u]}function w(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?A(function(t){var r=t.charAt(1),e=t.charAt(2),n=t.charAt(3),i=t.charAt(4);return["#",r,r,e,e,n,n,i,i].join("")}(t)):A(t);if(-1!==t.indexOf("(")){var r=_(t),e=r.prefix,n=r.value;if(!e||!n)return;var i=R(n),u=[],f=i.length;switch(e){case a:case s:for(var o=0;o<f;++o)u[o]=parseFloat(i[o]);return u;case c:case l:for(o=0;o<f;++o)-1!==i[o].indexOf("%")?u[o]=parseFloat(i[o])/100:u[o]=parseFloat(i[o]);return function(t){var r=t[0],e=t[1],n=t[2];r<0&&(r+=360*Math.floor((Math.abs(r)+360)/360)),r%=360;var i,u=(1-Math.abs(2*n-1))*e,f=u*(1-Math.abs(r/60%2-1)),o=n-u/2;return r<60?i=[u,f,0]:r<120?i=[f,u,0]:r<180?i=[0,u,f]:r<240?i=[0,f,u]:r<300?i=[f,0,u]:r<360&&(i=[u,0,f]),[Math.round(255*(i[0]+o)),Math.round(255*(i[1]+o)),Math.round(255*(i[2]+o)),3<t.length?t[3]:1]}(u)}}}var i,M="animation-timing-function",O={transform:{},filter:{},attribute:{}},K={easing:[M]},C=((i={})[M]=!0,i.contents=!0,i),F=function(){function f(t,r){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",r&&this.setOptions(r),this.value=E(t)?t.split(this.separator):t}var t=f.prototype;return t.setOptions=function(t){for(var r in t)this[r]=t[r];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,r){return this.value[t]=r,this},t.clone=function(){var t=this,r=t.separator,e=t.prefix,n=t.suffix,i=t.model,u=t.type;return new f(this.value.map(function(t){return t instanceof f?t.clone():t}),{separator:r,prefix:e,suffix:n,model:i,type:u})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof f?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},f}();function I(t){return t instanceof F}function L(t){var r=typeof t;if(r===v){if(b(t))return p;if(I(t))return o}else if(r===e||r===n)return"value";return r}function T(t,r,e){void 0===e&&(e=t.length);for(var n=r,i=0;i<e;++i){if(!S(n))return;n=n[t[i]]}return n}function U(t,r,e){var n=r.length,i=t;if(0===n)return!1;for(var u=0;u<n;++u){if(!0===i)return!1;if(!(i=i[r[u]])||!e&&!0===i)return!1}return!0}function V(t,r){return U(O,t,r)}function Y(t){var r=s;return 3===t.length&&(t[3]=1),new F(t,{model:r,separator:",",type:"color",prefix:r+"(",suffix:")"})}function z(t,r){return new F(t,{type:"array",separator:r})}function N(t){if(!E(t))return b(t)?z(t,","):t;var r=R(t);return 1<r.length?z(r.map(function(t){return N(t)}),","):1<(r=function(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}(t)).length?z(r.map(function(t){return N(t)})," "):(r=/^(['"])([^'"]*)(['"])$/g.exec(t))&&r[1]===r[3]?new F([N(r[2])],{prefix:r[1],suffix:r[1]}):-1!==t.indexOf("(")?function(t){var r=_(t),e=r.prefix,n=r.value,i=r.suffix;if(void 0===n)return t;if(-1!==h.indexOf(e))return Y(w(t));var u=N(n),f=[n],o=",",a=e+"(",s=")"+i;return u instanceof F&&(o=u.separator,f=u.value,a+=u.prefix,s=u.suffix+s),new F(f,{separator:o,model:e,prefix:a,suffix:s})}(t):"#"===t.charAt(0)?function(t){var r=w(t);return r?Y(r):t}(t):t}function k(t){if(!t)return"";var r=[];for(var e in t)r.push(e.replace(/\d/g,"")+"("+t[e]+")");return r.join(" ")}function B(t,r){return void 0===r&&(r=!1),W({},t,r)}function W(t,r,e){for(var n in void 0===e&&(e=!1),r){var i=r[n],u=L(i);u===o?t[n]=e?i.toValue():i.clone():u===f?t[n]=e?q([n],i):i:u===p?t[n]=i.slice():u===v?S(t[n])&&!I(t[n])?W(t[n],i,e):t[n]=B(i,e):t[n]=r[n]}return t}function $(t){return t[0]in K?K[t[0]]:t}function q(t,r){var e=L(r);if(e===o)return r.toValue();if(e===f){if(t[0]!==M)return q(t,r())}else if(e===v)return B(r,!0);return r}var D=function(){function t(t){void 0===t&&(t={}),this.properties={},this.set(t)}var r=t.prototype;return r.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this.raw.apply(this,t);return q($(t),e)},r.raw=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return T($(t),this.properties)},r.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=$(t),n=e.length;if(!n)return this;var i=T(e,this.properties,n-1);return S(i)&&delete i[e[n-1]],this},r.set=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this,n=t.length,i=t.slice(0,-1),u=t[n-1];if(i[0]in K)e._set(K[i[0]],u);else if(2===n&&b(i[0]))e._set(i[0],u);else if(b(u))e._set(i,u);else if(I(u))V(i)?e.set.apply(e,i.concat([function r(t,e){void 0===e&&(e={});var n=t.model;if(n){t.setOptions({model:"",suffix:"",prefix:""});var i=1<t.size()?t:t.get(0);e[n]=i}else t.forEach(function(t){r(t,e)});return e}(u)])):e._set(i,u);else if(S(u))for(var f in u)e.set.apply(e,i.concat([f,u[f]]));else if(E(u)){if(V(i,!0)){if(function(t){return U(C,t,!0)}(i)||!V(i))this._set(i,u);else{var o=N(u);S(o)&&e.set.apply(e,i.concat([o]))}return this}var a=function(t){for(var r=t.split(";"),e={},n=r.length,i=0;i<n;++i){var u=/([^:]*):([\S\s]*)/g.exec(r[i]);!u||u.length<3||!u[1]?--n:e[u[1].trim()]=N(u[2].trim())}return{styles:e,length:n}}(u),s=a.styles,c=a.length;for(var f in s)e.set.apply(e,i.concat([f,s[f]]));if(c)return this;e._set(i,u)}else e._set(i,u);return e},r.has=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=$(t),n=e.length;return!!n&&!function(t){return typeof t==u}(T(e,this.properties,n))},r.clone=function(){return(new t).merge(this)},r.merge=function(t){var r=this.properties,e=t.properties;return e&&W(r,e),this},r.toCSSObject=function(){var t=this.get(),r={};for(var e in t)if(!V([e],!0)){var n=t[e];e!==M?r[e]=n:r[M.replace("animation",x)]=(E(n)?n:n.easingName)||"initial"}var i=k(t.transform),u=k(t.filter);return y&&i&&(r[y]=i),d&&u&&(r[d]=u),r},r.toCSS=function(){var t=this.toCSSObject(),r=[];for(var e in t)r.push(e+":"+t[e]+";");return r.join("")},r._set=function(t,r){for(var e=this.properties,n=t.length,i=0;i<n-1;++i){var u=t[i];u in e||(e[u]={}),e=e[u]}n&&(e[t[n-1]]=E(r)?N(r):r)},t}(),G=CSSRule.KEYFRAMES_RULE||CSSRule.WEBKIT_KEYFRAMES_RULE,H=CSSRule.KEYFRAME_RULE||CSSRule.WEBKIT_KEYFRAME_RULE;function J(i){for(var u=j(document.styleSheets).filter(function(t){try{return 0<t.cssRules.length}catch(t){return!1}}),t=u.length,r=function(t){var r=j(u[t].cssRules).filter(function(t){return t.name===i&&t.type===G})[0];if(r){var e=j(r.cssRules),n={};return e.forEach(function(t){if(t.type===H){var r=t.keyText,e=t.style.cssText;n[r]=e}}),{value:n}}},e=0;e<t;++e){var n=r(e);if("object"==typeof n)return n.value}return{}}t.getKeyframes=J,t.getKeyframesObject=function(t){var r=S(t)?t:J(t),e={};for(var n in r)e[n]=new D(r[n]).get();return e}});
//# sourceMappingURL=keyframer.pkgd.min.js.map
