/*
Copyright (c) 2019 Daybrush
name: keyframer
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/keyframer.git
version: 0.1.0
*/
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t=t||self).Keyframer={})}(this,function(t){"use strict";var i="object";function o(t){return[].slice.call(t)}function r(t){if(!y)return"";var r=(y.body||y.documentElement).style,e=d.length;if(typeof r[t]!=m)return t;for(var n=0;n<e;++n){var i="-"+d[n]+"-"+t;if(typeof r[i]!=m)return i}return""}var e,a="rgb",s="rgba",c="hsl",l="hsla",h=[a,s,c,l],f="function",p="property",v="array",g="object",n="string",u="number",m="undefined",y=typeof document!=m&&document,d=["webkit","ms","moz","o"],x=r("transform"),b=r("filter"),S=r("animation");function E(t){return t&&typeof t===g}function R(t){return Array.isArray(t)}function j(t){return typeof t===n}function _(t){var r=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return r?r.map(function(t){return t.trim()}):[]}function A(t){var r=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!r||r.length<4?{}:{prefix:r[1],value:r[2],suffix:r[3]}}function w(t){var r=function(t){return t.replace("#","")}(t),e=parseInt(r.substring(0,2),16),n=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16),u=parseInt(r.substring(6,8),16)/255;return isNaN(u)&&(u=1),[e,n,i,u]}function M(t){if("#"===t.charAt(0))return 4===t.length||5===t.length?w(function(t){var r=t.charAt(1),e=t.charAt(2),n=t.charAt(3),i=t.charAt(4);return["#",r,r,e,e,n,n,i,i].join("")}(t)):w(t);if(-1!==t.indexOf("(")){var r=A(t),e=r.prefix,n=r.value;if(!e||!n)return;var i=_(n),u=[],o=i.length;switch(e){case a:case s:for(var f=0;f<o;++f)u[f]=parseFloat(i[f]);return u;case c:case l:for(f=0;f<o;++f)-1!==i[f].indexOf("%")?u[f]=parseFloat(i[f])/100:u[f]=parseFloat(i[f]);return function(t){var r=t[0],e=t[1],n=t[2];r<0&&(r+=360*Math.floor((Math.abs(r)+360)/360)),r%=360;var i,u=(1-Math.abs(2*n-1))*e,o=u*(1-Math.abs(r/60%2-1)),f=n-u/2;return r<60?i=[u,o,0]:r<120?i=[o,u,0]:r<180?i=[0,u,o]:r<240?i=[0,o,u]:r<300?i=[o,0,u]:r<360&&(i=[u,0,o]),[Math.round(255*(i[0]+f)),Math.round(255*(i[1]+f)),Math.round(255*(i[2]+f)),3<t.length?t[3]:1]}(u)}}}var O="animation-timing-function",K={transform:{},filter:{},attribute:{}},C={easing:[O]},F=((e={})[O]=!0,e.contents=!0,e),I=function(){function o(t,r){this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",r&&this.setOptions(r),this.value=j(t)?t.split(this.separator):t}var t=o.prototype;return t.setOptions=function(t){for(var r in t)this[r]=t[r];return this},t.size=function(){return this.value.length},t.get=function(t){return this.value[t]},t.set=function(t,r){return this.value[t]=r,this},t.clone=function(){var t=this,r=t.separator,e=t.prefix,n=t.suffix,i=t.model,u=t.type;return new o(this.value.map(function(t){return t instanceof o?t.clone():t}),{separator:r,prefix:e,suffix:n,model:i,type:u})},t.toValue=function(){return this.prefix+this.join()+this.suffix},t.join=function(){return this.value.map(function(t){return t instanceof o?t.toValue():t}).join(this.separator)},t.forEach=function(t){return this.value.forEach(t),this},o}();function L(t){return t instanceof I}function N(t){var r=typeof t;if(r===g){if(R(t))return v;if(L(t))return p}else if(r===n||r===u)return"value";return r}function T(t,r){var e=[];if(function(t){return E(t)&&t.constructor===Object}(t))for(var n in t)r.push(n),e=e.concat(T(t[n],r)),r.pop();else e.push(r.slice());return e}function U(t,r,e){void 0===e&&(e=t.length);for(var n=r,i=0;i<e;++i){if(!E(n))return;n=n[t[i]]}return n}function V(t,r,e){var n=r.length,i=t;if(0===n)return!1;for(var u=0;u<n;++u){if(!0===i)return!1;if(!(i=i[r[u]])||!e&&!0===i)return!1}return!0}function Y(t,r){return V(K,t,r)}function z(t){var r=s;return 3===t.length&&(t[3]=1),new I(t,{model:r,separator:",",type:"color",prefix:r+"(",suffix:")"})}function k(t,r){return new I(t,{type:"array",separator:r})}function B(t){if(!j(t))return R(t)?k(t,","):t;var r=_(t);return 1<r.length?k(r.map(function(t){return B(t)}),","):1<(r=function(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}(t)).length?k(r.map(function(t){return B(t)})," "):(r=/^(['"])([^'"]*)(['"])$/g.exec(t))&&r[1]===r[3]?new I([B(r[2])],{prefix:r[1],suffix:r[1]}):-1!==t.indexOf("(")?function(t){var r=A(t),e=r.prefix,n=r.value,i=r.suffix;if(void 0===n)return t;if(-1!==h.indexOf(e))return z(M(t));var u=B(n),o=[n],f=",",a=e+"(",s=")"+i;return u instanceof I&&(f=u.separator,o=u.value,a+=u.prefix,s=u.suffix+s),new I(o,{separator:f,model:e,prefix:a,suffix:s})}(t):"#"===t.charAt(0)?function(t){var r=M(t);return r?z(r):t}(t):t}function W(t){if(!t)return"";var r=[];for(var e in t)r.push(e.replace(/\d$/g,"")+"("+t[e]+")");return r.join(" ")}function $(t,r){return void 0===r&&(r=!1),q({},t,r)}function q(t,r,e){for(var n in void 0===e&&(e=!1),r){var i=r[n],u=N(i);u===p?t[n]=e?i.toValue():i.clone():u===f?t[n]=e?G([n],i):i:u===v?t[n]=i.slice():u===g?E(t[n])&&!L(t[n])?q(t[n],i,e):t[n]=$(i,e):t[n]=r[n]}return t}function D(t){return t[0]in C?C[t[0]]:t}function G(t,r){var e=N(r);if(e===p)return r.toValue();if(e===f){if(t[0]!==O)return G(t,r())}else if(e===g)return $(r,!0);return r}var H=function(){function t(t){void 0===t&&(t={}),this.properties={},this.set(t)}var r=t.prototype;return r.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this.raw.apply(this,t);return G(D(t),e)},r.raw=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return U(D(t),this.properties)},r.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=D(t),n=e.length;if(!n)return this;var i=U(e,this.properties,n-1);return E(i)&&delete i[e[n-1]],this},r.set=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=this,n=t.length,i=t.slice(0,-1),u=t[n-1];if(i[0]in C)e._set(C[i[0]],u);else if(2===n&&R(i[0]))e._set(i[0],u);else if(R(u))e._set(i,u);else if(L(u))Y(i)?e.set.apply(e,i.concat([function r(t,e){void 0===e&&(e={});var n=t.model;if(n){t.setOptions({model:"",suffix:"",prefix:""});var i=1<t.size()?t:t.get(0);e[n]=i}else t.forEach(function(t){r(t,e)});return e}(u)])):e._set(i,u);else if(E(u))for(var o in u)e.set.apply(e,i.concat([o,u[o]]));else if(j(u)){if(Y(i,!0)){if(function(t){return V(F,t,!0)}(i)||!Y(i))this._set(i,u);else{var f=B(u);E(f)&&e.set.apply(e,i.concat([f]))}return this}var a=function(t){for(var r=t.split(";"),e={},n=r.length,i=0;i<n;++i){var u=/([^:]*):([\S\s]*)/g.exec(r[i]);!u||u.length<3||!u[1]?--n:e[u[1].trim()]=B(u[2].trim())}return{styles:e,length:n}}(u),s=a.styles,c=a.length;for(var o in s)e.set.apply(e,i.concat([o,s[o]]));if(c)return this;e._set(i,u)}else e._set(i,u);return e},r.getNames=function(){return T(this.properties,[])},r.has=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=D(t),n=e.length;return!!n&&!function(t){return typeof t==m}(U(e,this.properties,n))},r.clone=function(){return(new t).merge(this)},r.merge=function(t){var r=this.properties,e=t.properties;return e&&q(r,e),this},r.toCSSObject=function(){var t=this.get(),r={};for(var e in t)if(!Y([e],!0)){var n=t[e];e!==O?r[e]=n:r[O.replace("animation",S)]=(j(n)?n:n.easingName)||"initial"}var i=W(t.transform),u=W(t.filter);return x&&i&&(r[x]=i),b&&u&&(r[b]=u),r},r.toCSS=function(){var t=this.toCSSObject(),r=[];for(var e in t)r.push(e+":"+t[e]+";");return r.join("")},r._set=function(t,r){for(var e=this.properties,n=t.length,i=0;i<n-1;++i){var u=t[i];u in e||(e[u]={}),e=e[u]}n&&(e[t[n-1]]=j(r)?B(r):r)},t}(),J=CSSRule.KEYFRAMES_RULE||CSSRule.WEBKIT_KEYFRAMES_RULE,P=CSSRule.KEYFRAME_RULE||CSSRule.WEBKIT_KEYFRAME_RULE;function Q(i){for(var u=o(document.styleSheets).filter(function(t){try{return 0<t.cssRules.length}catch(t){return!1}}),t=u.length,r=function(t){var r=o(u[t].cssRules).filter(function(t){return t.name===i&&t.type===J})[0];if(r){var e=o(r.cssRules),n={};return e.forEach(function(t){if(t.type===P){var r=t.keyText,e=t.style.cssText;(function(t){var r=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return r?r.map(function(t){return t.trim()}):[]})(r).forEach(function(t){n[t]=e})}}),{value:n}}},e=0;e<t;++e){var n=r(e);if("object"==typeof n)return n.value}return{}}t.getKeyframes=Q,t.getKeyframesObject=function(t){var r=function(t){return t&&typeof t===i}(t)?t:Q(t),e={};for(var n in r)e[n]=new H(r[n]).get();return e}});
//# sourceMappingURL=keyframer.pkgd.min.js.map
